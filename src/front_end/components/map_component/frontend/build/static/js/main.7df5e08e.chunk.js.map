{"version":3,"sources":["MapComponent.tsx","index.tsx"],"names":["configuration","layers","require","setDefaultCredentials","username","apiKey","MapComponent","state","selectedHexId","render","initialViewState","props","args","jsonConverter","JSONConverter","map","x","convert","theme","style","position","height","controller","onClick","info","e","hex_id","object","console","log","setState","Streamlit","setComponentValue","getTooltip","text","price","price_per_m","area","count","mapStyle","BASEMAP","POSITRON","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"oVAYMA,EAAgB,CACpBC,OAAQC,EAAQ,MAGlBC,YAAsB,CACpBC,SAAU,SACVC,OAAQ,mB,IAOJC,E,4MACGC,MAAQ,CAAEC,cAAe,I,EAGzBC,OAAS,WACd,IAAMC,EAAmB,EAAKC,MAAMC,KAAX,iBAEnBC,EAAgB,IAAIC,IAAc,CAAEd,kBACpCC,EAAS,EAAKU,MAAMC,KAAX,OAA0BG,KAAI,SAACC,GAAD,OAC3CH,EAAcI,QAAQD,MAGN,EAAKL,MAAfO,MAYR,OACE,8BACE,yBAAKC,MAAO,CAAEC,SAAU,WAAYC,OAAQ,UAC1C,kBAAC,IAAD,CACEX,iBAAkBA,EAClBY,YAAY,EACZrB,OAAQA,EACRoB,OAAQ,QACRE,QAfW,SAACC,EAAqBC,GAAmB,IAAD,IACnDC,EAAM,oBAAGF,EAAKG,cAAR,aAAG,EAAaD,cAAhB,QAA0B,EAAKnB,MAAMC,cACjDoB,QAAQC,IAAIH,GACZ,EAAKI,SAAS,CAACtB,cAAekB,IAC9BK,IAAUC,kBAAkBN,IAYtBO,WAAY,SAACN,GAAD,+BACVA,GAAU,CACRO,KAAK,WAAD,2BACFP,EAAOA,cADL,aACF,EAAeD,cADb,QACuB,GADvB,gDAGFC,EAAOA,cAHL,aAGF,EAAeQ,aAHb,QAGsB,EAHtB,uDAKFR,EAAOA,cALL,aAKF,EAAeS,mBALb,QAK4B,EAL5B,+CAOFT,EAAOA,cAPL,aAOF,EAAeU,YAPb,QAOqB,EAPrB,mDAQmBV,EAAOA,cAR1B,aAQmB,EAAeW,aARlC,QAQ2C,MAInD,kBAAC,IAAD,CAAWC,SAAUC,IAAQC,e,YA/CdC,KAuDZC,cAAwBrC,GC5EvCsC,IAASnC,OACP,kBAAC,IAAMoC,WAAP,KACE,kBAAC,EAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.7df5e08e.chunk.js","sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport DeckGL from \"@deck.gl/react\"\nimport { setDefaultCredentials, BASEMAP } from \"@deck.gl/carto\"\nimport { StaticMap } from \"react-map-gl\"\nimport { JSONConverter } from \"@deck.gl/json\"\nimport { PickInfo } from \"@deck.gl/core/lib/deck\"\n\nconst configuration = {\n  layers: require(\"@deck.gl/layers\"),\n}\n\nsetDefaultCredentials({\n  username: \"public\",\n  apiKey: \"default_public\",\n})\n\ninterface State {\n  selectedHexId: string\n}\n\nclass MapComponent extends StreamlitComponentBase<State> {\n  public state = { selectedHexId: \"\"}\n\n\n  public render = (): ReactNode => {\n    const initialViewState = this.props.args[\"initialViewState\"]\n\n    const jsonConverter = new JSONConverter({ configuration })\n    const layers = this.props.args[\"layers\"].map((x: object) =>\n      jsonConverter.convert(x)\n    )\n\n    const { theme } = this.props\n    const style: React.CSSProperties = {}\n    if (theme) {\n    }\n\n    const mapOnClick = (info: PickInfo<any>, e: MouseEvent) => {\n      const hex_id = info.object?.hex_id ?? this.state.selectedHexId\n      console.log(hex_id)\n      this.setState({selectedHexId: hex_id})\n      Streamlit.setComponentValue(hex_id)\n    }\n\n    return (\n      <span>\n        <div style={{ position: \"relative\", height: \"500px\" }}>\n          <DeckGL\n            initialViewState={initialViewState}\n            controller={true}\n            layers={layers}\n            height={\"500px\"}\n            onClick={mapOnClick}\n            getTooltip={(object: PickInfo<any>) =>\n              object && {\n                text: `Hex ID: ${\n                  object.object?.hex_id ?? \"\"\n                }\\nAverage price: ${\n                  object.object?.price ?? 0\n                }\\nAverage price per m2: ${\n                  object.object?.price_per_m ?? 0\n                }\\nAverage area: ${\n                  object.object?.area ?? 0\n                }\\nNumber of offers: ${object.object?.count ?? 0}`,\n              }\n            }\n          >\n            <StaticMap mapStyle={BASEMAP.POSITRON} />\n          </DeckGL>\n        </div>\n      </span>\n    )\n  }\n}\n\nexport default withStreamlitConnection(MapComponent)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport MapComponent from \"./MapComponent\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <MapComponent />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}